(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(47)},44:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(24),i=a.n(r),o=a(13),s=a(14),l=a(28),u=a(29),d=a(17),h=a(5),p={meal:!1,categories:!1,directoryList:!1};var m={restaurant:!1};var E={showForm:!0,showResult:!1,editMode:!1};var b={results:!1,total:0};var g={addedRestaurant:!1};var y={selectedCheckboxes:[]};var C={categoriesSelection:!1};var S=Object(s.c)({fetchInitialState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INITIAL_STATE":return Object(h.a)({},e,{meal:t.data.meal,categories:t.data.categories,directoryList:t.data.directoryList});case"GET_ALL_DIRECTORY_RESTAURANTS_SUCCESS":return Object(h.a)({},e,{directoryList:t.data.content});default:return e}},fetchRandomRestaurant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_RANDOM_RESTAURANT_SUCCESS":return Object(h.a)({},e,{restaurant:t.data.restaurant,mealSelection:t.data.meal,categoriesSelection:t.data.categories});case"UNSET_RESTAURANT":return Object(h.a)({},e,{restaurant:!1,mealSelection:!1,categoriesSelection:!1});default:return e}},uiReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_FORM":return Object(h.a)({},e,{showForm:!0});case"HIDE_FORM":return Object(h.a)({},e,{showForm:!1});case"SHOW_RESULT":return Object(h.a)({},e,{showResult:!0});case"HIDE_RESULT":return Object(h.a)({},e,{showResult:!1});default:return e}},yelpSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_YELP_RESPONSE_SUCCESS":return Object(h.a)({},e,{results:t.data.results,total:t.data.total});case"YELP_SEARCH_RESET":return Object(h.a)({},e,{results:!1,total:0});default:return e}},displayAddedRestaurant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISPLAY_ADDED_RESTAURANT":return Object(h.a)({},e,{addedRestaurant:t.data});case"REMOVE_ADDED_RESTAURANT":return Object(h.a)({},e,{addedRestaurant:!1});default:return e}},checkboxSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CHECKBOX_SELECTION":return Object(h.a)({},e,{selectedCheckboxes:[].concat(Object(d.a)(e.selectedCheckboxes),[t.data])});case"REMOVE_CHECKBOX_SELECTION":var a=e.selectedCheckboxes.indexOf(t.data),n=e.selectedCheckboxes;return n.splice(a,1),Object(h.a)({},e,{selectedCheckboxes:n});default:return e}},categorySelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CATEGORY_SELECTION":return Object(h.a)({},e,{categoriesSelection:t.data});default:return e}}}),f=Object(l.createLogger)({collapsed:!0}),v=Object(s.e)(S,Object(s.d)(Object(s.a)(u.a,f),window.devToolsExtension?window.devToolsExtension():function(e){return e})),R=a(6),k=a(7),O=a(9),A=a(8),_=a(10),T=(a(44),a(48)),j=function(e){function t(){return Object(R.a)(this,t),Object(O.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row align-items-center justify-content-between"},c.a.createElement("h1",null,c.a.createElement(T.a,{to:"/",className:"button-primary"},"I don't feel like cooking!")),c.a.createElement(T.a,{to:"/directory",className:"button-primary"},"Directory")))}}]),t}(n.Component),D=a(2),N=a(12),w=a.n(N);function U(e){return function(t){!function(e,t){t({type:"UPDATE_ADDED_RESTAURANT_REQUEST"}),w()("api/restaurant/update/".concat(e.id),{method:"PUT",body:JSON.stringify({meal:e.selectedMeal,category:e.selectedCategories}),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(a){t({type:"UPDATE_ADDED_RESTAURANT_SUCCESS"}),"yelp"===e.type&&(t({type:"REMOVE_ADDED_RESTAURANT"}),t({type:"YELP_SEARCH_RESET"})),t({type:"GET_ALL_DIRECTORY_RESTAURANTS_REQUEST"}),w()("api/restaurants/list/").then(function(e){return e.json()}).then(function(e){t({type:"GET_ALL_DIRECTORY_RESTAURANTS_SUCCESS",data:e})}).catch(function(e){t({type:"GET_ALL_DIRECTORY_RESTAURANTS_FAILURE",data:e})})}).catch(function(e){t({type:"UPDATE_ADDED_RESTAURANT_FAILURE",data:e})})}(e,t)}}function x(e){return function(t){!function(e,t){t({type:"DELETE_ADDED_RESTAURANT_REQUEST"}),w()("api/delete/restaurant/".concat(e),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(){t({type:"DELETE_ADDED_RESTAURANT_SUCCESS"}),t({type:"GET_ALL_DIRECTORY_RESTAURANTS_REQUEST"}),w()("api/restaurants/list/").then(function(e){return e.json()}).then(function(e){t({type:"GET_ALL_DIRECTORY_RESTAURANTS_SUCCESS",data:e})}).catch(function(e){t({type:"GET_ALL_DIRECTORY_RESTAURANTS_FAILURE",data:e})})}).catch(function(e){t({type:"DELETE_ADDED_RESTAURANT_FAILURE",data:e})})}(e,t)}}function L(e){return function(t){!function(e,t){t({type:"ADD_RESTAURANT_REQUEST"});var a="".concat(e.location.display_address[0]," ").concat(e.location.display_address[1]);w()("/api/restaurant/add/",{method:"POST",body:JSON.stringify({name:e.name,address:a}),headers:{"content-type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t({type:"DISPLAY_ADDED_RESTAURANT",data:e})}).catch(function(e){t({type:"ADDED_RESTAURANT_FAILURE",data:e})})}(e,t)}}function I(e){return function(t){!function(e,t){t({type:"REQUEST_RANDOM_RESTAURANT",data:e}),w()("/api/restaurant/random/".concat(e.categories,"/").concat(e.meal)).then(function(e){return e.json()}).then(function(a){t({type:"RECEIVED_RANDOM_RESTAURANT_SUCCESS",data:{restaurant:a,meal:e.meal,categories:e.categories}})}).catch(function(e){t({type:"RECEIVED_RANDOM_RESTAURANT_FAILURE",data:e})})}(e,t)}}function M(e){return function(t){!function(e,t){t({type:"REQUEST_YELP_API"}),w()("/api/search/restaurants/".concat(e)).then(function(e){return e.json()}).then(function(e){t({type:"RECEIVED_YELP_RESPONSE_SUCCESS",data:{results:e.businesses,total:e.total}})}).catch(function(e){t({type:"RECEIVED_YELP_RESPONSE_FAILURE",data:e})})}(e,t)}}var F=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(O.a)(this,Object(A.a)(t).call(this))).state={value:!1},e.handleChange=e.handleChange.bind(Object(D.a)(Object(D.a)(e))),e}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.selected&&this.setState({value:this.props.selected})}},{key:"handleChange",value:function(e){var t=this;this.setState({value:e.target.value},function(){t.props.handleCategoryChange(t.state.value)})}},{key:"render",value:function(){return c.a.createElement("select",{className:"form-control",name:"categories",id:"categories",onChange:this.handleChange,value:this.state.value},c.a.createElement("option",{value:""},"Select a category"),this.props.categories.map(function(e,t){return c.a.createElement("option",{value:e.category,key:t},e.category)}))}}]),t}(n.Component);var P=function(e){return c.a.createElement("select",{className:"form-control",name:"meal",id:"meal",onChange:function(t){e.handleMealChange(t)}},c.a.createElement("option",{value:""},"Select a meal"),e.meal.map(function(e,t){return c.a.createElement("option",{value:e.type,key:t},e.type)}))},Y=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(O.a)(this,Object(A.a)(t).call(this))).state={showMeals:!1,showSubmit:!1},e.handleCategoryChange=e.handleCategoryChange.bind(Object(D.a)(Object(D.a)(e))),e.handleMealChange=e.handleMealChange.bind(Object(D.a)(Object(D.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(D.a)(Object(D.a)(e))),e}return Object(_.a)(t,e),Object(k.a)(t,[{key:"handleCategoryChange",value:function(e){this.setState({showMeals:!0})}},{key:"handleMealChange",value:function(e){this.setState({showSubmit:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.getRandomRestaurant({meal:e.target.meal.value,categories:e.target.categories.value})}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement(F,{categories:this.props.categories,handleCategoryChange:this.handleCategoryChange}),this.state.showMeals&&c.a.createElement(P,{meal:this.props.meal,handleMealChange:this.handleMealChange}),this.state.showSubmit&&c.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-outline-primary"}))}}]),t}(n.Component);var H=function(e){return c.a.createElement("span",{className:"badge badge-primary"},e.meal)};var B=function(e){return c.a.createElement("span",{className:"badge badge-secondary"},e.category)};var G=function(e){return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",{className:"card-title"},e.restaurant.name),c.a.createElement("div",{className:"card-text"},e.restaurant.address),e.restaurant.meal.map(function(e,t){return c.a.createElement(H,{key:t,meal:e})}),c.a.createElement(B,{category:e.restaurant.category})))},V=function(e){function t(e){var a;return Object(R.a)(this,t),(a=Object(O.a)(this,Object(A.a)(t).call(this,e))).getRandomRestaurant=a.getRandomRestaurant.bind(Object(D.a)(Object(D.a)(a))),a.startOver=a.startOver.bind(Object(D.a)(Object(D.a)(a))),a.tryAgain=a.tryAgain.bind(Object(D.a)(Object(D.a)(a))),a}return Object(_.a)(t,e),Object(k.a)(t,[{key:"getRandomRestaurant",value:function(e){var t={meal:e.meal,categories:e.categories};this.props.dispatch(I(t)),this.props.dispatch({type:"HIDE_FORM"}),this.props.dispatch({type:"SHOW_RESULT"}),this.props.dispatch({type:"UNSET_RESTAURANT"})}},{key:"startOver",value:function(){this.props.dispatch({type:"SHOW_FORM"}),this.props.dispatch({type:"HIDE_RESULT"})}},{key:"tryAgain",value:function(){this.getRandomRestaurant({meal:this.props.mealSelection,categories:this.props.categoriesSelection})}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},this.props.categories&&this.props.meal&&this.props.showForm&&c.a.createElement(Y,{getRandomRestaurant:this.getRandomRestaurant,categories:this.props.categories,meal:this.props.meal}),this.props.restaurant&&this.props.showResult&&c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.tryAgain},"Try again"),c.a.createElement("button",{className:"btn btn-outline-primary",onClick:this.startOver},"Start over"),c.a.createElement(G,{restaurant:this.props.restaurant})))}}]),t}(n.Component),W=Object(o.b)(function(e,t){return{meal:e.fetchInitialState.meal,mealSelection:e.fetchRandomRestaurant.mealSelection,categoriesSelection:e.fetchRandomRestaurant.categoriesSelection,showForm:e.uiReducer.showForm,showResult:e.uiReducer.showResult,restaurant:e.fetchRandomRestaurant.restaurant}})(V),Q=function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement("input",{type:"text",name:"keyword"}),c.a.createElement("input",{className:"btn btn-primary",type:"submit"}))};var J=function(e){return c.a.createElement("div",{className:"list-group"},e.children)};var K=function(e){return c.a.createElement("div",{className:"list-group-item"},c.a.createElement("div",null,e.name),e.children)},X=function(e){return c.a.createElement("div",{className:"list-group-item"},c.a.createElement("div",null,e.restaurant.name),c.a.createElement("div",null,e.restaurant.address),e.children)};var $=function(e){return e.selected?c.a.createElement("div",null,e.meal.map(function(t,a){return c.a.createElement("div",{key:a,className:"checkbox"},-1!==e.selected.indexOf(t.type)&&c.a.createElement("label",{key:a,htmlFor:""},c.a.createElement("input",{onClick:e.onCheckboxClick,type:"checkbox",value:t.type,defaultChecked:"true"}),t.type),-1===e.selected.indexOf(t.type)&&c.a.createElement("label",{key:a,htmlFor:""},c.a.createElement("input",{onClick:e.onCheckboxClick,type:"checkbox",value:t.type}),t.type))})):c.a.createElement("div",null,e.meal.map(function(t,a){return c.a.createElement("div",{key:a,className:"checkbox"},c.a.createElement("label",{key:a,htmlFor:""},c.a.createElement("input",{onClick:e.onCheckboxClick,type:"checkbox",value:t.type}),t.type))}))};var q=function(e){return c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-primary",onClick:e.onDeleteClick,id:e.id},"Delete"))};var z=function(e){return c.a.createElement("div",{className:"list-group"},e.children)},Z=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(O.a)(this,Object(A.a)(t).call(this))).state={editMode:!1,checkboxSelection:[]},e.onEditClick=e.onEditClick.bind(Object(D.a)(Object(D.a)(e))),e.onSaveClick=e.onSaveClick.bind(Object(D.a)(Object(D.a)(e))),e.onCancelClick=e.onCancelClick.bind(Object(D.a)(Object(D.a)(e))),e.onCheckboxClick=e.onCheckboxClick.bind(Object(D.a)(Object(D.a)(e))),e}return Object(_.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.setState({checkboxSelection:this.props.meal})}},{key:"onEditClick",value:function(){this.setState({editMode:!0})}},{key:"onSaveClick",value:function(e){this.setState({editMode:!1}),this.props.onSaveClick({event:e,checkboxSelection:this.state.checkboxSelection})}},{key:"onCancelClick",value:function(e){this.setState({editMode:!1})}},{key:"onCheckboxClick",value:function(e){var t=e.target.value;e.target.checked?this.setState(function(e){return{checkboxSelection:e.checkboxSelection?[].concat(Object(d.a)(e.checkboxSelection),[t]):[t]}}):this.setState(function(e){var a=e.checkboxSelection.indexOf(t),n=e.checkboxSelection;return n.splice(a,1),{checkboxSelection:n}})}},{key:"render",value:function(){var e=this;return this.props.includeEditButton?c.a.createElement(c.a.Fragment,null,this.state.editMode&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F,{categories:this.props.categories,selected:this.props.category,handleCategoryChange:this.props.handleCategoryChange}),c.a.createElement($,{meal:this.props.checkboxmeal,selected:this.props.meal,onCheckboxClick:this.onCheckboxClick}),c.a.createElement("button",{className:"btn btn-primary",onClick:this.onSaveClick,id:this.props.id,checkboxes:this.state.checkboxSelection,savetype:this.props.savetype},"Save"),c.a.createElement("button",{className:"btn btn-secondary",onClick:this.onCancelClick},"Cancel")),!1===this.state.editMode&&c.a.createElement(c.a.Fragment,null,this.props.meal&&this.props.meal.map(function(e,t){return c.a.createElement(H,{key:t,meal:e})}),c.a.createElement(B,{category:this.props.category}),c.a.createElement("button",{onClick:function(){return e.onEditClick(!0)}},"Edit"))):c.a.createElement(c.a.Fragment,null,c.a.createElement(F,{categories:this.props.categories,selected:!1,handleCategoryChange:this.props.handleCategoryChange}),c.a.createElement($,{meal:this.props.checkboxmeal,selected:!1,onCheckboxClick:this.onCheckboxClick}),c.a.createElement("button",{className:"btn btn-primary",onClick:this.onSaveClick,id:this.props.id,checkboxes:this.state.checkboxSelection,savetype:this.props.savetype},"Save"),c.a.createElement("button",{className:"btn btn-secondary",onClick:this.onCancelClick},"Cancel"))}}]),t}(n.Component),ee=function(e){function t(){var e;return Object(R.a)(this,t),(e=Object(O.a)(this,Object(A.a)(t).call(this))).handleSubmit=e.handleSubmit.bind(Object(D.a)(Object(D.a)(e))),e.addButtonClick=e.addButtonClick.bind(Object(D.a)(Object(D.a)(e))),e.handleCategoryChange=e.handleCategoryChange.bind(Object(D.a)(Object(D.a)(e))),e.onSaveClick=e.onSaveClick.bind(Object(D.a)(Object(D.a)(e))),e.onDeleteClick=e.onDeleteClick.bind(Object(D.a)(Object(D.a)(e))),e}return Object(_.a)(t,e),Object(k.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.dispatch(M(e.target.keyword.value))}},{key:"addButtonClick",value:function(e){var t=e.target.getAttribute("index"),a=this.props.results[t];this.props.dispatch(L(a))}},{key:"handleCategoryChange",value:function(e){this.props.dispatch({type:"ADD_CATEGORY_SELECTION",data:e})}},{key:"onSaveClick",value:function(e){var t=e.event,a=this.props.addedRestaurant.id?this.props.addedRestaurant.id:t.target.id,n=t.target.getAttribute("savetype"),c=e.checkboxSelection,r={id:a,selectedCategories:this.props.selectedCategories,selectedMeal:c,type:n};this.props.dispatch(U(r))}},{key:"onDeleteClick",value:function(e){this.props.dispatch(x(e.target.id))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement(Q,{handleSubmit:this.handleSubmit}),this.props.results.length>0&&c.a.createElement(J,null,this.props.results.map(function(t,a){return c.a.createElement(K,{name:t.name,key:a},c.a.createElement("button",{className:"btn btn-primary",onClick:e.addButtonClick,index:a},"Add"))})),this.props.addedRestaurant.name&&c.a.createElement(X,{restaurant:this.props.addedRestaurant,id:this.props.addedRestaurant.id},c.a.createElement(Z,{id:this.props.addedRestaurant.id,categories:this.props.categories,checkboxmeal:this.props.meal,handleCategoryChange:this.handleCategoryChange,onSaveClick:this.onSaveClick,includeEditButton:!1,savetype:"yelp"}),c.a.createElement(q,{onDeleteClick:this.onDeleteClick,id:this.props.addedRestaurant.id})),this.props.directoryList.length>0&&c.a.createElement(z,null,this.props.directoryList.map(function(t,a){return c.a.createElement(X,{key:a,restaurant:t,id:t.id},c.a.createElement(Z,{id:t.id,categories:e.props.categories,checkboxmeal:e.props.meal,handleCategoryChange:e.handleCategoryChange,onSaveClick:e.onSaveClick,meal:t.meal,category:t.category,includeEditButton:!0,savetype:"directory"}),c.a.createElement(q,{onDeleteClick:e.onDeleteClick,id:t.id}))})))}}]),t}(n.Component),te=Object(o.b)(function(e,t){return{results:e.yelpSearch.results,total:e.yelpSearch.total,addedRestaurant:e.displayAddedRestaurant.addedRestaurant,selectedCategories:e.categorySelection.categoriesSelection,selectedMeal:e.checkboxSelection.selectedCheckboxes,directoryList:e.fetchInitialState.directoryList}})(ee),ae=a(49),ne=a(50),ce=a(51),re=function(e){function t(){return Object(R.a)(this,t),Object(O.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(ae.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(j,null),c.a.createElement(ne.a,null,c.a.createElement(ce.a,{path:"/",component:function(){return c.a.createElement(W,{meal:e.props.meal,categories:e.props.categories})},exact:!0}),c.a.createElement(ce.a,{path:"/directory",component:function(){return c.a.createElement(te,{meal:e.props.meal,categories:e.props.categories})},exact:!0}))))}}]),t}(n.Component),ie=Object(o.b)(function(e,t){return{meal:e.fetchInitialState.meal,categories:e.fetchInitialState.categories}})(re),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var le=[w()("/api/meal"),w()("/api/categories"),w()("/api/restaurants/list")];Promise.all(le.map(function(e){return e.then(function(e){return e.json()}).then(function(e){return e})})).then(function(e){var t={};e.map(function(e){return t[e.type]=e.content,!0}),v.dispatch({type:"FETCH_INITIAL_STATE",data:t})}),i.a.render(c.a.createElement(o.a,{store:v},c.a.createElement(ie,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");oe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):se(e)})}}()}},[[32,1,2]]]);
//# sourceMappingURL=main.89506435.chunk.js.map